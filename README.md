
# 🌿 季节性草原生态系统模拟器

> 一个基于终端的、支持季节变化与动态平衡的生态系统仿真程序

## 📝 项目简介

本项目是一个使用 C 语言开发的**终端可视化生态系统模拟器**，模拟了草原上草、兔子与狼三者之间的食物链与种群动态关系。程序引入了**四季变化机制**，对草的再生速率产生显著影响，从而间接调控整个生态系统的稳定性。

通过观察种群数量的历史变化、峰值与谷值，用户可以直观理解**生态平衡、资源限制、捕食关系**等自然规律，也可用于教学演示、生态建模入门、系统动力学探索等场景。

## 🌍 核心特性

- **三阶层食物链模拟**：草 → 兔子 → 狼
- **四季动态机制**：
  - 春季/夏季：草快速再生
  - 秋季：草再生缓慢
  - 冬季：草几乎不生长（生存压力最大）
- **智能行为模型**：
  - 兔子会主动寻找最近的草
  - 狼会追踪最近的兔子
  - 无法移动时随机游走
- **真实生态参数**：
  - 能量消耗（移动、季节加成）
  - 年龄限制（个体衰老死亡）
  - 繁殖条件（能量阈值 + 概率）
- **交互式控制**：
  - 暂停/继续
  - 调整模拟速度（+/-）
  - 重置生态
  - 保存当前快照（文本格式）
- **可视化输出**：
  - 彩色地图（ANSI 转义码）
  - 实时种群数量
  - 历史种群变化图（ASCII 柱状图）
  - 详细图例与操作提示

## 🖥️ 运行效果

```
..r..rr.rr..r.r.grrr..rrr...
r...r.rr....r.rgggr....rrrr.
.....rrr...r.....r...rrrr.r.
.r....rrrrr.r....rr..rrrr.r.
.rr...rrrr.r.........rrr.r.r
.rr...rrrr.gr..r...rg.r.rrr.
.r.......rr..r..r.r.....rrrr
..g..........r...r....rrrr.r
..rr..r..rr..r..rrr.rr....rr
..r...rr.rr..grgGGg.rr...rrr
..rr..r..rr...ggG.G........r
.rr.r.rWW.r.rWW.rG.r.rr...r.
.rr.W.r....r..WWWGr.r.r...r.
..rrrrrr.rrrW...rrr.rGrr....
.....rrr.rrrg....Gr..Grrr.r.
.rrrr.r..rr.rrr.GGr..r.r..r.
...rrr....rrGr.rGGr.g......r
..rr....rrrrGr..rG..r....r..
rr.r.rrgr.rrrr..r.g.....rrr.
rr.........rrg...rr.....rrr.
rrrrr.gG.....G..rr.g........
r....rgGr..g.gr..r...r...rr.
......GGGr...........r......
...g.gGgGrr....rr..r.....rrG
..r.g.GrrGGrr..rr.rrrr.rGGGr
GGr.gg......r...grG.g..r.GGG
gr.......g.G.gr.g.G.Gr...G.G
GGr..GgrgGGGG.g..GGGrgGGGgGg

【当前状态】 回合:   12 | 季节: 春季
青草: 269 | 兔子: 248 | 狼:   8
历史峰值 (兔/狼): 248/  8 | 谷值:  40/  4
模拟速度: 250 毫秒/回合 | 状态: 【已暂停】

【种群历史】最近 50 回合数量变化:
|                                                  r
|                                                 rr
|                                                rrr
|                                              rrrrr
|                                            rrrrrrr
|                                        rrrrrrrrrrr
+--------------------------------------------------

【图例】 g=嫩草 G=熟草 r=兔子 W=狼 .=空地

【操作】 [空格]=暂停/继续  [+/=]=加速  [-]=减速  [R]=重置  [S]=保存  [Q]=退出
```

## 🛠️ 编译与运行

### 支持平台

- **Windows**

### 运行

```bash
ecosystem.exe      
```

## 🎮 操作指南

| 按键 | 功能 |
|------|------|
| `空格` | 暂停 / 继续模拟 |
| `+` 或 `=` | 加快模拟速度 |
| `-` | 减慢模拟速度 |
| `R` | 重置生态系统（保留初始设置） |
| `S` | 保存当前地图快照（`.txt` 文件） |
| `Q` | 退出程序 |

## 📊 模拟规则说明

### 🌱 草（Grass）
- **再生**：每回合按季节概率在空地上生成
  - 春：12% | 夏：10% | 秋：3% | 冬：0.5%
- **状态**：嫩草（`g`）和熟草（`G`），仅视觉区分

### 🐇 兔子（Rabbit）
- **初始能量**：12
- **最大寿命**：30–49 回合
- **移动消耗**：1 能量（冬季 ×2）
- **进食**：在草上获得 +10 能量
- **繁殖**：
  - 能量 ≥ 22（消耗 10）
  - 繁殖概率：35%
  - 后代初始能量：10

### 🐺 狼（Wolf）
- **初始能量**：25
- **最大寿命**：50–69 回合
- **移动消耗**：2 能量（冬季 ×2）
- **进食**：捕食兔子获得 +25 能量
- **繁殖**：
  - 能量 ≥ 35（消耗 15）
  - 繁殖概率：20%
  - 后代初始能量：15

### ⏳ 季节切换
- 每 **100 回合** 自动进入下一季节
- 起始季节由用户选择（默认春季）

## 💾 快照保存

按 `S` 可将当前生态状态保存为文本文件，例如：

```
生态系统_回合_125.txt
```

内容包含：
- 回合数、季节、各物种数量
- 完整地图（`G`=草, `r`=兔, `W`=狼, `.`=空地）

可用于复现实验、分析特定状态或分享结果。

## 🌱 教学与研究价值

- **生态学教学**：展示捕食者-猎物动态、资源限制效应
- **系统仿真入门**：理解状态更新、网格模型、随机过程
- **编程实践**：跨平台终端 I/O、状态机、内存管理
- **敏感性分析**：通过调整初始数量或繁殖率，观察系统崩溃或稳定

 
